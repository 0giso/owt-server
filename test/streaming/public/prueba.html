

<html>
<head>
<script src="/socket.io/socket.io.js"></script>

<script src="http://code.jquery.com/jquery-1.6.1.min.js"></script>
</head>
<body>
<script>
  var nicklist;
  var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });

socket.on('nicknames', function(data){
	console.log("NICKS!!!!!" + data);
	nicklist = data;
	var nicks = "<ul>";
	for (var i in data) {
		console.log(i);
		nicks = nicks + "<li>" + i + "</li>";
	}
	nicks+="</ul>";
	$("#lista").html(nicks);
})
socket.on('message', function(data){
	console.log("BROADCAST!!!!!" + data);
	$("#texto").append("<p>" + data + "</p>");
})

$("#sendNick").live("click",function() { 
	console.log("sending Nickname: "+ $("#nick").val()); 
	socket.emit('nickname', $("#nick").val(), function (set){
		console.log("Respuesta nickname: "+ set);
	});
});

$("#sendMess").live("click",function() { 
	console.log("sending Message: "+ $("#message").val()); 
	socket.emit('unicast', 'publisher', $("#message").val());	
	});
</script>
	
<p><input type="text" id="nick"></input></p>
<p><button id="sendNick">Send</button></p>
<p><input type="text" id="message"></input></p>
<p><button id="sendMess">Send</button></p>

<div id = "texto"></div>
<div id = "lista"></div>


</body>
</head>